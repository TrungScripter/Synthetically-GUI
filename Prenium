-- FORCE BASICBAT + AUTO ACCEPT TRADE
-- SPECIFICALLY for "basicbat" tool

local Player = game:GetService("Players").LocalPlayer
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Settings
local Enabled = true
local AutoAccept = true
local ForceBasicBat = true

-- Variables
local basicBat = nil
local lastCheck = 0

-- Simple GUI
local gui = Instance.new("ScreenGui")
gui.Name = "BasicBatForcer"
gui.Parent = game.CoreGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 250, 0, 120)
frame.Position = UDim2.new(0.5, -125, 0, 20)
frame.BackgroundColor3 = Color3.fromRGB(10, 10, 20)
frame.BackgroundTransparency = 0.1
frame.BorderSizePixel = 0
frame.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = frame

local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(100, 150, 255)
stroke.Thickness = 2
stroke.Parent = frame

local title = Instance.new("TextLabel")
title.Text = "ðŸ”¨ BASICBAT FORCER"
title.Size = UDim2.new(1, 0, 0, 35)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(40, 60, 120)
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame

local status = Instance.new("TextLabel")
status.Text = "Bat: SEARCHING FOR BASICBAT..."
status.Size = UDim2.new(1, 0, 0, 40)
status.Position = UDim2.new(0, 0, 0, 35)
status.BackgroundTransparency = 1
status.TextColor3 = Color3.fromRGB(255, 200, 100)
status.Font = Enum.Font.GothamSemibold
status.TextSize = 14
status.Parent = frame

local trade = Instance.new("TextLabel")
trade.Text = "Trade: READY"
trade.Size = UDim2.new(1, 0, 0, 45)
trade.Position = UDim2.new(0, 0, 0, 75)
trade.BackgroundTransparency = 1
trade.TextColor3 = Color3.fromRGB(200, 200, 255)
trade.Font = Enum.Font.Gotham
trade.TextSize = 12
trade.Parent = frame

-- Make GUI draggable
local dragging = false
local dragInput, dragStart, startPos

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UIS.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- FIND BASICBAT SPECIFICALLY
function findBasicBat()
    local backpack = Player:FindFirstChild("Backpack")
    if backpack then
        -- Look for EXACT name "basicbat" (case insensitive)
        for _, tool in pairs(backpack:GetChildren()) do
            if tool:IsA("Tool") and string.lower(tool.Name) == "basicbat" then
                basicBat = tool
                status.Text = "Bat: FOUND BASICBAT âœ“"
                status.TextColor3 = Color3.fromRGB(100, 255, 100)
                return tool
            end
        end
        
        -- Also check character in case already equipped
        local character = Player.Character
        if character then
            for _, tool in pairs(character:GetChildren()) do
                if tool:IsA("Tool") and string.lower(tool.Name) == "basicbat" then
                    basicBat = tool
                    status.Text = "Bat: BASICBAT EQUIPPED âœ“"
                    status.TextColor3 = Color3.fromRGB(100, 255, 100)
                    return tool
                end
            end
        end
        
        -- If not found by exact name, try partial match
        for _, tool in pairs(backpack:GetChildren()) do
            if tool:IsA("Tool") and string.find(string.lower(tool.Name), "basic") then
                basicBat = tool
                status.Text = "Bat: FOUND " .. tool.Name .. " âœ“"
                status.TextColor3 = Color3.fromRGB(100, 255, 100)
                return tool
            end
        end
    end
    
    basicBat = nil
    status.Text = "Bat: BASICBAT NOT FOUND âœ—"
    status.TextColor3 = Color3.fromRGB(255, 100, 100)
    return nil
end

-- FORCE EQUIP BASICBAT (AGGRESSIVE)
function forceBasicBat()
    if not ForceBasicBat or not Enabled then return end
    
    local character = Player.Character
    if not character or not character:FindFirstChild("Humanoid") then return false end
    
    -- Find bat if not already found
    if not basicBat then
        findBasicBat()
        if not basicBat then return false end
    end
    
    local humanoid = character.Humanoid
    
    -- Check if basicbat is currently equipped
    local batEquipped = false
    local otherToolEquipped = nil
    
    for _, tool in pairs(character:GetChildren()) do
        if tool:IsA("Tool") then
            if tool == basicBat then
                batEquipped = true
            else
                otherToolEquipped = tool
            end
        end
    end
    
    -- If basicbat is NOT equipped (or another tool IS equipped), force equip basicbat
    if not batEquipped or otherToolEquipped then
        -- Unequip any other tool
        if otherToolEquipped then
            humanoid:UnequipTool(otherToolEquipped)
        end
        
        -- Equip basicbat
        humanoid:EquipTool(basicBat)
        status.Text = "Bat: FORCED BASICBAT âœ“"
        status.TextColor3 = Color3.fromRGB(100, 255, 100)
        return true
    end
    
    -- If bat is already equipped, just update status
    if batEquipped then
        status.Text = "Bat: BASICBAT EQUIPPED âœ“"
        status.TextColor3 = Color3.fromRGB(100, 255, 100)
    end
    
    return false
end

-- REAL-TIME BASICBAT ENFORCER (RUNS EVERY FRAME)
RunService.RenderStepped:Connect(function()
    if not Enabled or not ForceBasicBat then return end
    
    -- Force basicbat every frame (60 times per second!)
    forceBasicBat()
end)

-- TRADE ACCEPT FUNCTION (SIMPLE BUT EFFECTIVE)
function acceptTradeNow()
    if not AutoAccept or not Enabled then return false end
    
    -- Method 1: Look for ANY "Accept" button
    for _, gui in pairs(game:GetDescendants()) do
        if gui:IsA("TextButton") then
            local text = gui.Text
            if text and (string.find(string.lower(text), "accept") or string.find(string.lower(text), "trade")) then
                -- Try to click it multiple ways
                pcall(function() gui:FireEvent("MouseButton1Click") end)
                pcall(function() gui:FireEvent("Activated") end)
                pcall(function() gui:FireEvent("MouseButton1Down") end)
                pcall(function() gui:FireEvent("MouseButton1Up") end)
                
                trade.Text = "Trade: ACCEPTED âœ“"
                trade.TextColor3 = Color3.fromRGB(100, 255, 100)
                return true
            end
        end
    end
    
    -- Method 2: Look for ImageButton in trade GUI
    for _, gui in pairs(game:GetDescendants()) do
        if gui:IsA("ImageButton") then
            local parent = gui.Parent
            if parent and (string.find(string.lower(parent.Name), "trade") or 
                           string.find(string.lower(parent.Name), "gift")) then
                pcall(function() gui:FireEvent("MouseButton1Click") end)
                trade.Text = "Trade: ACCEPTED (IMG) âœ“"
                trade.TextColor3 = Color3.fromRGB(100, 255, 150)
                return true
            end
        end
    end
    
    trade.Text = "Trade: WAITING..."
    trade.TextColor3 = Color3.fromRGB(200, 200, 255)
    return false
end

-- Trade accept loop
spawn(function()
    while true do
        if Enabled and AutoAccept then
            acceptTradeNow()
        end
        wait(0.2) -- Check every 0.2 seconds
    end
end)

-- Keyboard controls
UIS.InputBegan:Connect(function(input, gp)
    if gp then return end
    
    -- Toggle script
    if input.KeyCode == Enum.KeyCode.T then
        Enabled = not Enabled
        if Enabled then
            title.Text = "ðŸ”¨ BASICBAT FORCER"
            title.BackgroundColor3 = Color3.fromRGB(40, 60, 120)
            status.Text = "Bat: ACTIVATED"
            status.TextColor3 = Color3.fromRGB(100, 255, 100)
            print("Script: ON")
            
            -- Force bat immediately
            forceBasicBat()
        else
            title.Text = "ðŸ”¨ BASICBAT FORCER (OFF)"
            title.BackgroundColor3 = Color3.fromRGB(80, 20, 20)
            status.Text = "Bat: DISABLED"
            status.TextColor3 = Color3.fromRGB(255, 100, 100)
            print("Script: OFF")
        end
    end
    
    -- Manual bat equip
    if input.KeyCode == Enum.KeyCode.B then
        forceBasicBat()
        print("Manual basicbat equip")
    end
    
    -- Manual trade accept
    if input.KeyCode == Enum.KeyCode.A then
        if acceptTradeNow() then
            print("Manual trade accept")
        else
            print("No trade button found")
        end
    end
end)

-- When character respawns
Player.CharacterAdded:Connect(function(char)
    wait(1) -- Wait for character to load
    basicBat = nil -- Reset so we search again
    if Enabled then
        findBasicBat()
        forceBasicBat()
    end
end)

-- Initial setup
wait(2)
findBasicBat()
if basicBat then
    forceBasicBat()
    print("BasicBat found and equipped: " .. basicBat.Name)
else
    print("ERROR: Could not find basicbat!")
end

print("========================================")
print("ðŸ”¨ BASICBAT FORCER LOADED!")
print("========================================")
print("FEATURES:")
print("  âœ“ SPECIFICALLY looks for 'basicbat'")
print("  âœ“ Forces basicbat EVERY FRAME (60 FPS)")
print("  âœ“ Auto-accepts trade requests")
print("  âœ“ Cannot unequip basicbat - re-equips instantly")
print("")
print("CONTROLS:")
print("  T = Toggle script ON/OFF")
print("  B = Force equip basicbat")
print("  A = Force accept trade")
print("========================================")
